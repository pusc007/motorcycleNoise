(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{420:function(t,e,i){},421:function(t,e,i){},470:function(t,e,i){"use strict";i(420)},471:function(t,e,i){"use strict";i(421)},475:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-sheet",{staticClass:"content"},[i("Header"),t._v(" "),i("v-main",{staticClass:"main"},[i("v-container",[i("div",{staticClass:"d-flex justify-center ma-4"},[t._v("請依序選擇 縣市 > 檢測站點 > 可預約日期")]),t._v(" "),i("v-select",{staticClass:"mt-4",attrs:{color:"cyan",items:t.countyList,label:"縣市",loading:t.countyLoading},on:{click:t.county_click},scopedSlots:t._u([{key:"no-data",fn:function(){return[i("div",{staticClass:"pa-2"},[t._v(t._s(t.countyLoading?"載入中...":"空資料"))])]},proxy:!0},{key:"selection",fn:function(e){var a=e.item;return[i("div",{staticClass:"text-truncate"},[t._v(t._s(a.text))])]}},{key:"item",fn:function(e){var a=e.item,n=e.attrs,s=e.on;return[i("v-list-item",t._g(t._b({},"v-list-item",n,!1),s),[i("v-list-item-content",[i("v-list-item-title",{attrs:{id:n["aria-labelledby"]},domProps:{textContent:t._s(a.text)}})],1)],1)]}}]),model:{value:t.countyValue,callback:function(e){t.countyValue=e},expression:"countyValue"}}),t._v(" "),t.countyValue?i("v-select",{staticClass:"mt-4",attrs:{color:"cyan",items:t.stationList,label:"檢測站點",loading:t.stationLoading},on:{click:t.station_click,change:t.station_change},scopedSlots:t._u([{key:"no-data",fn:function(){return[i("div",{staticClass:"pa-2"},[t._v(t._s(t.stationLoading?"載入中...":"空資料"))])]},proxy:!0},{key:"selection",fn:function(e){var a=e.item;return[i("div",{staticClass:"text-truncate"},[t._v(t._s(a.text))])]}},{key:"item",fn:function(e){var a=e.item,n=e.attrs,s=e.on;return[i("v-list-item",t._g(t._b({},"v-list-item",n,!1),s),[i("v-list-item-content",[i("v-list-item-title",{attrs:{id:n["aria-labelledby"]},domProps:{textContent:t._s(a.text)}})],1)],1)]}}],null,!1,2771200930),model:{value:t.stationValue,callback:function(e){t.stationValue=e},expression:"stationValue"}}):t._e(),t._v(" "),t.countyValue&&t.stationValue?i("v-toolbar",{staticClass:"d-flex justify-center",attrs:{flat:""}},[i("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.prev}},[i("v-icon",{attrs:{small:""}},[t._v("\n            mdi-chevron-left\n          ")])],1),t._v(" "),i("v-toolbar-title",[t._v(" "+t._s(t.selectYear)+" 年 "+t._s(t.selectMonth)+" 月")]),t._v(" "),i("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.next}},[i("v-icon",{attrs:{small:""}},[t._v("\n            mdi-chevron-right\n          ")])],1)],1):t._e(),t._v(" "),t.countyValue&&t.stationValue?[t.stationDateLoading?i("div",{staticClass:"d-flex justify-center text-h6"},[t._v("載入中...")]):i("Calendar",{attrs:{year:t.selectYear,month:t.selectMonth,items:t.openDate},scopedSlots:t._u([{key:"content",fn:function(e){return[i("div",{staticClass:"dateBox pa-2"},["past"!==e.item.status&&e.item.presentMonth&&e.item.bool?i("div",{staticClass:"dateInfo"},[i("div",{staticClass:"text"},[i("div",[t._v("已預約："+t._s(e.item.count))]),t._v(" "),i("div",[t._v("尚可預約："+t._s(e.item.maxcount-e.item.count))])]),t._v(" "),i("div",{staticClass:"d-flex justify-end"},[i("v-btn",{staticClass:"cyan white--text",attrs:{depressed:""},on:{click:function(i){return t.reservationBtn_click(e.item.date)}}},[t._v("預約")])],1)]):t._e()])]}}],null,!1,1710393212)})]:t._e()],2)],1),t._v(" "),i("v-dialog",{attrs:{persistent:"","max-width":"300px"},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[i("v-card",{staticClass:"pa-4",attrs:{light:""}},[i("v-card-text",{staticClass:"text-center"},[t._v(" 確定預約 "+t._s(t.reservDate)+" ? ")]),t._v(" "),i("v-card-actions",{staticClass:"justify-center"},[i("v-btn",{attrs:{depressed:""},on:{click:t.cancelBtn_click}},[t._v("\n          取消\n        ")]),t._v(" "),i("v-btn",{attrs:{depressed:"",color:"cyan white--text"},on:{click:t.certainBtn_click}},[t._v("\n          確定\n        ")])],1)],1)],1),t._v(" "),i("v-overlay",{attrs:{value:t.loading}},[i("v-progress-circular",{attrs:{indeterminate:"",size:"64"}},[t._v("預約中...")])],1)],1)};a._withStripped=!0;var n=i(406),s=i(424),o=i(400),c={components:{Header:n.a,Calendar:s.a},data:function(){return{countyList:[],countyValue:"",countyLoading:!1,stationList:[],stationValue:"",stationLoading:!1,currentDay:new Date,selectYear:null,selectMonth:null,alert:!1,loading:!1,stationDateLoading:!1,api_getCountyList_promise:null,api_getStationList_promise:null,api_getStationDate_promise:null,openDate:[],reservDate:""}},mounted:function(){this.selectYear=this.currentDay.getFullYear(),this.selectMonth=this.currentDay.getMonth()+1},methods:{county_click:function(){var t=this;this.api_getCountyList_promise&&(this.api_getCountyList_promise.cancel(),this.api_getCountyList_promise=null),this.countyValue="",this.countyList=[],this.countyLoading=!0,this.api_getCountyList_promise=Object(o.b)(this.$store.state.token),this.api_getCountyList_promise.then((function(e){t.countyLoading=!1,t.countyList=e}))},station_click:function(){var t=this;this.api_getStationList_promise&&(this.api_getStationList_promise.cancel(),this.api_getStationList_promise=null),this.stationValue="",this.stationList=[],this.stationLoading=!0,this.api_getStationList_promise=Object(o.e)(this.$store.state.token,this.countyValue),this.api_getStationList_promise.then((function(e){t.stationLoading=!1,t.stationList=e}))},updateStationDate:function(){var t=this;this.api_getStationDate_promise&&(this.api_getStationDate_promise.cancel(),this.api_getStationDate_promise=null),this.stationDateLoading=!0,this.api_getStationDate_promise=Object(o.d)(this.$store.state.token,this.stationValue,this.selectYear,this.selectMonth),this.api_getStationDate_promise.then((function(e){t.stationDateLoading=!1,t.openDate=e}))},prev:function(){this.currentDay.setFullYear(this.currentDay.getFullYear(),this.currentDay.getMonth()-1),this.selectYear=this.currentDay.getFullYear(),this.selectMonth=this.currentDay.getMonth()+1,this.updateStationDate()},next:function(){this.currentDay.setFullYear(this.currentDay.getFullYear(),this.currentDay.getMonth()+1),this.selectYear=this.currentDay.getFullYear(),this.selectMonth=this.currentDay.getMonth()+1,this.updateStationDate()},reservationBtn_click:function(t){this.reservDate=t,this.alert=!0},certainBtn_click:function(){var t=this;this.alert=!1,this.loading=!0,Object(o.g)(this.$store.state.token,this.countyValue,this.stationValue,this.reservDate).then((function(){t.$store.dispatch("setReserv",{county:t.countyValue,station:t.stationValue,reserv:t.reservDate}),t.reservDate="",t.$router.push({name:"Extension"})}))},cancelBtn_click:function(){this.reservDate="",this.alert=!1},station_change:function(){this.updateStationDate()}},computed:{}},r=(i(470),i(471),i(115)),l=Object(r.a)(c,a,[],!1,null,"2056fb8f",null);l.options.__file="src/vue/pages/Reservation.vue";e.default=l.exports}}]);